import "dotenv/config";
import { Pool } from "pg";

const findDbUrl = () => {
    let url = process.env.DATABASE_URL || process.env.DATABASE || process.env.DB_URL || process.env.DB;
    if (!url) {
        const fuzzyKey = Object.keys(process.env).find(k =>
            k.toUpperCase().includes("DATABASE") &&
            process.env[k]?.trim().startsWith("postgres")
        );
        if (fuzzyKey) url = process.env[fuzzyKey];
    }
    if (url && url.trim().length > 10) {
        return url.replace(/^['"]|['"]$/g, "").trim();
    }
    return null;
};

const categories = [
    {
        name: "ØªØ·ÙˆÙŠØ± Ø§Ù„ÙˆÙŠØ¨",
        slug: "web-development",
        description: "Ù…Ø¨ØªØ¯Ø¦: Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„ÙˆÙŠØ¨ (HTML5, CSS3) ÙˆÙƒÙŠÙÙŠØ© Ø¬Ø¹Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…ØªØ¬Ø§ÙˆØ¨Ø§Ù‹. Ù…ØªÙˆØ³Ø·: Ù„ØºØ© JavaScript Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©ØŒ ÙˆØ§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ù…Ø«Ù„ Tailwind CSS. Ù…ØªÙ‚Ø¯Ù…: Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø³ÙŠØ±ÙØ± (PHP Ø£Ùˆ Node.js) Ù…Ø¹ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (SQL/NoSQL)."
    },
    {
        name: "Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ",
        slug: "data-ai",
        description: "Ù…Ø¨ØªØ¯Ø¦: Ø£Ø³Ø§Ø³ÙŠØ§Øª Ù„ØºØ© Python ÙˆØ§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø³ÙŠØ·Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Pandas. Ù…ØªÙˆØ³Ø·: Ø§Ù„Ø¥Ø­ØµØ§Ø¡ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØŒ ØªØµÙˆØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŒ ÙˆØ¨Ø¯Ø§ÙŠØ§Øª ØªØ¹Ù„Ù… Ø§Ù„Ø¢Ù„Ø©. Ù…ØªÙ‚Ø¯Ù…: Ø§Ù„Ø´Ø¨ÙƒØ§Øª Ø§Ù„Ø¹ØµØ¨ÙŠØ©ØŒ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„ØªÙˆÙ„ÙŠØ¯ÙŠØŒ ÙˆÙ…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù„ØºØ§Øª Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©."
    },
    {
        name: "ØªØ·ÙˆÙŠØ± ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù‡Ø§ØªÙ",
        slug: "mobile-development",
        description: "Ù…Ø¨ØªØ¯Ø¦: Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„Ù„ØºØ© (Dart Ø£Ùˆ Swift) ÙˆØ¨Ù†Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¨Ø³ÙŠØ·Ø©. Ù…ØªÙˆØ³Ø·: Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ù€ APIØŒ Ø§Ù„Ø­Ø§Ù„Ø© (State Management)ØŒ ÙˆÙ‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©. Ù…ØªÙ‚Ø¯Ù…: Ø§Ù„Ø±Ø¨Ø· Ù…Ø¹ FirebaseØŒ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§ØªØŒ ÙˆØ±ÙØ¹ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ù…ØªØ§Ø¬Ø±."
    },
    {
        name: "Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ",
        slug: "cybersecurity",
        description: "Ù…Ø¨ØªØ¯Ø¦: Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„Ø´Ø¨ÙƒØ§ØªØŒ Ø£Ù†Ø¸Ù…Ø© LinuxØŒ ÙˆÙ…ÙØ§Ù‡ÙŠÙ… Ø£Ù…Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª. Ù…ØªÙˆØ³Ø·: Ø§Ù„ØªØ´ÙÙŠØ±ØŒ ÙØ­Øµ Ø§Ù„Ø«ØºØ±Ø§ØªØŒ ÙˆØ£Ù…Ù† Ø§Ù„Ø´Ø¨ÙƒØ§Øª Ø§Ù„Ù„Ø§Ø³Ù„ÙƒÙŠØ©. Ù…ØªÙ‚Ø¯Ù…: Ø§Ù„Ø§Ø®ØªØ±Ø§Ù‚ Ø§Ù„Ø£Ø®Ù„Ø§Ù‚ÙŠØŒ Ø§Ù„ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ø¬Ù†Ø§Ø¦ÙŠ Ø§Ù„Ø±Ù‚Ù…ÙŠØŒ ÙˆØ­Ù…Ø§ÙŠØ© Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª."
    },
    {
        name: "ØªØµÙ…ÙŠÙ… Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª UI/UX",
        slug: "ui-ux-design",
        description: "Ù…Ø¨ØªØ¯Ø¦: Ù…Ø¨Ø§Ø¯Ø¦ Ø§Ù„ØªØµÙ…ÙŠÙ…ØŒ Ø³ÙŠÙƒÙˆÙ„ÙˆØ¬ÙŠØ© Ø§Ù„Ø£Ù„ÙˆØ§Ù†ØŒ ÙˆØ£Ø³Ø§Ø³ÙŠØ§Øª Ø£Ø¯Ø§Ø© Figma. Ù…ØªÙˆØ³Ø·: ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (UX Research)ØŒ Ø±Ø³Ù… Ø§Ù„Ù€ WireframesØŒ ÙˆØ§Ù„Ù€ Prototyping. Ù…ØªÙ‚Ø¯Ù…: ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£Ù†Ø¸Ù…Ø© (Design Systems)ØŒ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…ØŒ ÙˆØ§Ù„ØªØ­Ø±ÙŠÙƒ."
    },
    {
        name: "Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø±Ù‚Ù…ÙŠ",
        slug: "digital-marketing",
        description: "Ù…Ø¨ØªØ¯Ø¦: Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆØ¥Ø¯Ø§Ø±Ø© Ù…Ù†ØµØ§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ. Ù…ØªÙˆØ³Ø·: Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„ÙÙŠØ³Ø¨ÙˆÙƒØŒ Ø§Ù†Ø³ØªØ¬Ø±Ø§Ù…ØŒ ÙˆØ¬ÙˆØ¬Ù„ (Paid Ads). Ù…ØªÙ‚Ø¯Ù…: Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„Ù†Ù…ÙˆØŒ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ³ÙˆÙŠÙ‚ÙŠØ©ØŒ ÙˆØ§Ù„Ù€ SEO Ø§Ù„Ù…ØªÙ‚Ø¯Ù…."
    },
    {
        name: "Ø§Ù„Ù…ÙˆÙ†ØªØ§Ø¬ ÙˆØµÙ†Ø§Ø¹Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰",
        slug: "video-editing",
        description: "Ù…Ø¨ØªØ¯Ø¦: Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù…ÙˆÙ†ØªØ§Ø¬ (Ø§Ù„Ù‚ØµØŒ Ø§Ù„ØªØ±ØªÙŠØ¨ØŒ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„Ø§Øª Ø§Ù„Ø¨Ø³ÙŠØ·Ø©). Ù…ØªÙˆØ³Ø·: ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ù„ÙˆØ§Ù†ØŒ Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„ØµÙˆØªØŒ ÙˆØ§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø³Ø±Ø¹Ø©. Ù…ØªÙ‚Ø¯Ù…: Ø§Ù„Ù…Ø¤Ø«Ø±Ø§Øª Ø§Ù„Ø¨ØµØ±ÙŠØ© (VFX)ØŒ Ø§Ù„Ù…ÙˆÙ†ØªØ§Ø¬ Ø§Ù„Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠØŒ ÙˆØ§Ù„Ø®Ø¯Ø¹ Ø§Ù„Ø¨ØµØ±ÙŠØ©."
    },
    {
        name: "Ø§Ù„Ø­ÙˆØ³Ø¨Ø© Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ©",
        slug: "cloud-computing",
        description: "Ù…Ø¨ØªØ¯Ø¦: Ù…Ù‚Ø¯Ù…Ø© ÙÙŠ Ù…ÙÙ‡ÙˆÙ… Ø§Ù„Ø³Ø­Ø§Ø¨Ø© ÙˆØ§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø§Ø³ØªØ¶Ø§ÙØ© Ø§Ù„Ø¨Ø³ÙŠØ·Ø©. Ù…ØªÙˆØ³Ø·: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø¯Ù…Ø§Øª ÙÙŠ (AWS Ø£Ùˆ Azure) ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´Ø¨ÙƒØ§Øª Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ©. Ù…ØªÙ‚Ø¯Ù…: Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØ©ØŒ Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ø³Ø­Ø§Ø¨ÙŠØŒ ÙˆØªØ­Ø¬ÙŠÙ… Ø§Ù„Ø£Ù†Ø¸Ù…Ø© (Scaling)."
    },
    {
        name: "Ø§Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©",
        slug: "e-commerce",
        description: "Ù…Ø¨ØªØ¯Ø¦: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù†ØªØ¬ØŒ Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…ØªØ¬Ø± Ø¹Ù„Ù‰ (Shopify/Salla)ØŒ ÙˆØ§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©. Ù…ØªÙˆØ³Ø·: Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ù„Ù„Ù…ØªØ¬Ø±ØŒ Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ØŒ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø´Ø­Ù†. Ù…ØªÙ‚Ø¯Ù…: Ø§Ù„Ø¯Ø±ÙˆØ¨ Ø´ÙˆØ¨ÙŠÙ†Ø¬ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØŒ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø§Ù„ÙŠ Ù„Ù„Ù…ØªØ¬Ø±ØŒ ÙˆØªÙˆØ³ÙŠØ¹ Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©."
    },
    {
        name: "Ø§Ù„ØªØ¯Ø§ÙˆÙ„ ÙˆØ§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±",
        slug: "trading",
        description: "Ù…Ø¨ØªØ¯Ø¦: Ù…ÙØ§Ù‡ÙŠÙ… Ø§Ù„Ø¨ÙˆØ±ØµØ©ØŒ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§ØªØŒ ÙˆÙƒÙŠÙÙŠØ© ÙØªØ­ Ø§Ù„Ù…Ø­ÙØ¸Ø©. Ù…ØªÙˆØ³Ø·: Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙÙ†ÙŠØŒ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø´Ù…ÙˆØ¹ Ø§Ù„ÙŠØ§Ø¨Ø§Ù†ÙŠØ©ØŒ ÙˆØ§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©. Ù…ØªÙ‚Ø¯Ù…: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø±ØŒ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ØªØ¯Ø§ÙˆÙ„ Ø§Ù„Ø¢Ù„ÙŠØŒ ÙˆØ³ÙŠÙƒÙˆÙ„ÙˆØ¬ÙŠØ© Ø§Ù„Ø³ÙˆÙ‚."
    },
    {
        name: "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹",
        slug: "project-management",
        description: "Ù…Ø¨ØªØ¯Ø¦: Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„ØªØ®Ø·ÙŠØ·ØŒ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø£Ù‡Ø¯Ø§ÙØŒ ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø¯ÙˆØ§Øª Ù…Ø«Ù„ Trello. Ù…ØªÙˆØ³Ø·: Ù…Ù†Ù‡Ø¬ÙŠØ§Øª Agile Ùˆ ScrumØŒ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± ÙÙŠ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹. Ù…ØªÙ‚Ø¯Ù…: Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©ØŒ Ù…ÙŠØ²Ø§Ù†ÙŠØ§Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ø¶Ø®Ù…Ø©ØŒ ÙˆØ§Ù„ØªØ­Ø¶ÙŠØ± Ù„Ø´Ù‡Ø§Ø¯Ø© PMP."
    },
    {
        name: "Ø§Ù„Ù…ÙˆØ´Ù† Ø¬Ø±Ø§ÙÙŠÙƒ",
        slug: "motion-graphics",
        description: "Ù…Ø¨ØªØ¯Ø¦: Ø±Ø³Ù… Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø¹Ù„Ù‰ Illustrator ÙˆØ£Ø³Ø§Ø³ÙŠØ§Øª Ø¨Ø±Ù†Ø§Ù…Ø¬ After Effects. Ù…ØªÙˆØ³Ø·: ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ§ØªØŒ Ø§Ù„Ù†ØµÙˆØµØŒ ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù€ Keyframes Ø¨Ø§Ø­ØªØ±Ø§ÙÙŠØ©. Ù…ØªÙ‚Ø¯Ù…: Ø§Ù„ØªØ­Ø±ÙŠÙƒ Ø«Ù„Ø§Ø«ÙŠ Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ØŒ Ø§Ù„Ù…Ø¤Ø«Ø±Ø§Øª Ø§Ù„ØµÙˆØªÙŠØ© Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†Ø©ØŒ ÙˆØ¥Ù†ØªØ§Ø¬ ÙÙŠØ¯ÙŠÙˆ Ø¯Ø¹Ø§Ø¦ÙŠ ÙƒØ§Ù…Ù„."
    },
    {
        name: "ØªØ·ÙˆÙŠØ± Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨",
        slug: "game-development",
        description: "Ù…Ø¨ØªØ¯Ø¦: Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„Ù…Ø­Ø±Ùƒ (Unity/Unreal) ÙˆÙ„ØºØ© Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù‡. Ù…ØªÙˆØ³Ø·: ÙÙŠØ²ÙŠØ§Ø¡ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ØŒ Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§ØªØŒ ÙˆØ§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù„Ù„Ø£Ø¹Ø¯Ø§Ø¡. Ù…ØªÙ‚Ø¯Ù…: Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ© (Multiplayer)ØŒ ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ØŒ ÙˆØ§Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØµØ§Øª."
    },
    {
        name: "ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",
        slug: "data-analytics",
        description: "Ù…Ø¨ØªØ¯Ø¦: Ø§Ø³ØªØ®Ø¯Ø§Ù… Excel Ø§Ù„Ù…ØªÙ‚Ø¯Ù… Ù„ØªÙ†Ø¸ÙŠÙ… ÙˆØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ø³ÙŠØ·Ø©. Ù…ØªÙˆØ³Ø·: Ù„ØºØ© SQL Ù„Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©. Ù…ØªÙ‚Ø¯Ù…: Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø¯ÙˆØ§Øª BI Ù…Ø«Ù„ (Power BI) Ù„Ø¨Ù†Ø§Ø¡ ØªÙ‚Ø§Ø±ÙŠØ± ØªÙØ§Ø¹Ù„ÙŠØ© Ù„Ù„Ù…Ø¯ÙŠØ±ÙŠÙ†."
    },
    {
        name: "Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª Ùˆ DevOps",
        slug: "software-engineering-devops",
        description: "Ù…Ø¨ØªØ¯Ø¦: Ø¬ÙˆØ¯Ø© Ø§Ù„ÙƒÙˆØ¯ (Clean Code) ÙˆØ§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Git/GitHub. Ù…ØªÙˆØ³Ø·: Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª (Docker) ÙˆØ£ØªÙ…ØªØ© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©. Ù…ØªÙ‚Ø¯Ù…: Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª (Kubernetes) ÙˆØ¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ù…Ø³ØªÙ…Ø± (CI/CD)."
    },
    {
        name: "Ø¹Ù„Ù… Ø§Ù„Ù„ØºØ§Øª",
        slug: "language-learning",
        description: "Ù…Ø¨ØªØ¯Ø¦: Ø§Ù„Ù…ÙØ±Ø¯Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©ØŒ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…ØŒ ÙˆØ§Ù„ØªØ¹Ø±ÙŠÙ Ø¨Ø§Ù„Ù†ÙØ³ (A1/A2). Ù…ØªÙˆØ³Ø·: ØªØ±ÙƒÙŠØ¨ Ø§Ù„Ø¬Ù…Ù„ Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©ØŒ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© ÙÙŠ Ù…ÙˆØ§Ø¶ÙŠØ¹ Ø¹Ø§Ù…Ø© (B1/B2). Ù…ØªÙ‚Ø¯Ù…: Ø§Ù„Ø·Ù„Ø§Ù‚Ø© ÙÙŠ Ø§Ù„ØªØ­Ø¯Ø«ØŒ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ©ØŒ ÙˆØ§Ù„ØªØ­Ø¶ÙŠØ± Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª (C1/C2)."
    }
];

async function main() {
    const dbUrl = findDbUrl();
    if (!dbUrl) {
        console.error("âŒ DATABASE_URL not found!");
        process.exit(1);
    }

    const pool = new Pool({
        connectionString: dbUrl,
        ssl: { rejectUnauthorized: false },
    });

    try {
        console.log("ğŸ”Œ Connecting to database...\n");

        // Count existing categories
        const existing = await pool.query("SELECT COUNT(*) FROM categories");
        console.log(`ğŸ“Š Existing categories: ${existing.rows[0].count}`);

        // Delete old categories
        if (Number(existing.rows[0].count) > 0) {
            const del = await pool.query("DELETE FROM categories");
            console.log(`ğŸ—‘ï¸  Deleted ${del.rowCount} old categories`);
        }

        // Insert new categories
        console.log("\nğŸ“ Adding 16 new categories...\n");
        for (const cat of categories) {
            await pool.query(
                `INSERT INTO categories (id, name, slug, description, created_at) 
                 VALUES (gen_random_uuid(), $1, $2, $3, NOW())`,
                [cat.name, cat.slug, cat.description]
            );
            console.log(`   âœ… ${cat.name} (${cat.slug})`);
        }

        // Verify
        const final = await pool.query("SELECT COUNT(*) FROM categories");
        console.log(`\nğŸ‰ Done! Total categories: ${final.rows[0].count}`);

    } catch (err) {
        console.error("âŒ Error:", err);
    } finally {
        await pool.end();
    }
}

main();
